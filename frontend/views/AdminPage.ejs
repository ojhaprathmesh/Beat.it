<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Beat.it Admin Panel - Manage your music platform">
    <title>Beat.it Admin</title>
    <link rel="shortcut icon" type="image/x-icon" href="/assets/browserIcon.ico" />

    <link rel="stylesheet" href="/styles/font.css">
    <link rel="stylesheet" href="/styles/colors.css">
    <link rel="stylesheet" href="/styles/admin/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="admin-body">
    <div class="admin-container">
        <!-- Sidebar navigation -->
        <div class="admin-sidebar">
            <div class="admin-sidebar-header">
                <img src="/assets/Beat.it%20Logo.webp" alt="Beat.it Admin" class="admin-logo">
                <h1>Beat.it Admin</h1>
            </div>
            
            <div class="admin-nav-item active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </div>
            <div class="admin-nav-item" data-section="songs">
                <i class="fas fa-music"></i> Songs
            </div>
            <div class="admin-nav-item" data-section="artists">
                <i class="fas fa-users"></i> Artists & Albums
            </div>
            <div class="admin-nav-item" data-section="users">
                <i class="fas fa-user"></i> Users
            </div>
            <div class="admin-nav-item" data-section="storage">
                <i class="fas fa-database"></i> Storage
            </div>
            <div class="admin-nav-item" data-section="analytics">
                <i class="fas fa-chart-bar"></i> Analytics
            </div>
            
            <div class="admin-nav-item" onclick="history.back()">
                <i class="fas fa-home"></i> Back to Site
            </div>
            <div class="admin-nav-item" onclick="window.location.href='/logout'">
                <i class="fas fa-sign-out-alt"></i> Logout
            </div>
        </div>

        <!-- Main content area -->
        <div class="admin-content">
            <div class="admin-header">
                <h1 id="section-title">Dashboard</h1>
                <div class="admin-user-info">
                    <% if (typeof user !== 'undefined' && user.username) { %>
                    <span><%= user.username %></span>
                    <% } else { %>
                        <span><%= typeof name !== 'undefined' ? name : (typeof email !== 'undefined' ? email : 'Admin') %></span>
                    <% } %>
                    <i class="fas fa-user-circle"></i>
                </div>
            </div>
            
            <!-- Content container (will be populated by JavaScript) -->
            <div id="admin-content-container">
                <!-- Initial dashboard content -->
                <div class="admin-dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Songs</h3>
                            <div class="stat-value" id="total-songs">Loading...</div>
                            <div class="stat-subtitle">In your library</div>
                        </div>
                        <div class="stat-card">
                            <h3>Total Users</h3>
                            <div class="stat-value" id="total-users">Loading...</div>
                            <div class="stat-subtitle">Registered accounts</div>
                        </div>
                        <div class="stat-card">
                            <h3>Storage Used</h3>
                            <div class="stat-value" id="storage-used">Loading...</div>
                            <div class="stat-subtitle">Of available space</div>
                        </div>
                        <div class="stat-card">
                            <h3>Most Played</h3>
                            <div class="stat-value" id="most-played">Loading...</div>
                            <div class="stat-subtitle">Top song</div>
                        </div>
                    </div>

                    <div class="admin-row">
                        <!-- Top songs chart card -->
                        <div class="admin-card chart-card">
                            <div class="admin-card-header">
                                <h2 class="admin-card-title"><i class="fas fa-chart-bar"></i> Top Played Songs</h2>
                            </div>
                            <div class="admin-card-content">
                                <div class="chart-container">
                                    <canvas id="top-songs-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick actions card -->
                        <div class="admin-card">
                            <div class="admin-card-header">
                                <h2 class="admin-card-title"><i class="fas fa-bolt"></i> Quick Actions</h2>
                            </div>
                            <div class="admin-card-content">
                                <div class="quick-actions">
                                    <a href="#" class="quick-action-btn" id="add-song-action">
                                        <i class="fas fa-music"></i>
                                        <span>Add Song</span>
                                    </a>
                                    <a href="#" class="quick-action-btn" id="add-user-action">
                                        <i class="fas fa-user-plus"></i>
                                        <span>Add User</span>
                                    </a>
                                    <a href="#" class="quick-action-btn" id="view-analytics-action">
                                        <i class="fas fa-chart-line"></i>
                                        <span>View Analytics</span>
                                    </a>
                                    <a href="#" class="quick-action-btn" id="manage-storage-action">
                                        <i class="fas fa-database"></i>
                                        <span>Manage Storage</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent activity card -->
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <h2 class="admin-card-title"><i class="fas fa-history"></i> Recent Activity</h2>
                        </div>
                        <div class="admin-card-content">
                            <div id="recent-activity" class="admin-loading">Loading activity data...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin module scripts -->
    <script src="/scripts/admin/admin.js"></script>
    <script src="/scripts/admin/dashboard.js"></script>
    <script src="/scripts/admin/users.js"></script>
    <script src="/scripts/admin/songs.js"></script>
    <script src="/scripts/admin/artists.js"></script>
    <script src="/scripts/admin/storage.js"></script>
    <script src="/scripts/admin/analytics.js"></script>
</body>

</html> 